version: '3.8'

services:
#  frontend:
#    build:
#      context: ./frontend
#    ports:
#      - "3000:80" # Mapujemy port 80 z Nginx na lokalny port 3000
#    networks:
#      - app-network

  backend:
    build:
      context: ./backend
    ports:
      - "8080:8080" # Mapujemy port 8080 na lokalny port 8080
    networks:
      - app-network
    environment:
      - SPRING_PROFILES_ACTIVE=dev
      - DATABASE_URL=jdbc:mysql://database:3306/appdb

  database:
    image: mysql:8
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: appdb
      MYSQL_USER: appuser
      MYSQL_PASSWORD: apppassword
    ports:
      - "3306:3306"
    networks:
      - app-network

networks:
  app-network: